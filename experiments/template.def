suite template

    # defstatus suspended #queued

    edit ECF_HOME "/work/csp/mg20022/ecflow/" 
    edit ECF_HOST "zeus" 
    edit ECF_INCLUDE "/work/csp/mg20022/ecflow/includes"

    # repeat string HOUR 00 06 12 18
    edit NCYCLES 1
    edit CONT_RUN FALSE
    edit ACTIVE_ASSI TRUE
    edit FORECAST FALSE
    edit FENS 2
    edit CLEANA TRUE
    edit MAXTRY 10
    edit check_assi 0
    edit TRY 0

    edit case_name template
    edit MODE operation # reanalysis
    edit observation_operational FALSE
    edit nens 3
    edit sequential_assim TRUE
    edit baseobsdir /users_home/csp/sm09722/BUFR_D4O
    # time 00:00
    # time 06:00
    # time 12:00
    # time 18:00 

    family background

        defstatus suspended

        task pre

        family run

            trigger pre==complete
            task mem_1
            task mem_2
            task mem_3

        endfamily
    endfamily


    family prepare_assimilation

        defstatus queued
        trigger background==complete

        task pre_departure

    endfamily
    
    family filter_departure_cleaver_screening
        defstatus queued

        family departure
        

            edit first_departure null
            edit last_departure null
            edit end_order null
            trigger ../prepare_assimilation==complete

            # meter done 0 13 1
            edit done 0
            # limit lim 5
            task dep_1
              label info ""
                trigger dep_7==complete
            task dep_2
              label info ""
              trigger dep_7==complete
            task dep_3
              label info ""
              trigger dep_7==complete
            task dep_4
              label info ""
              trigger dep_7==complete
            task dep_5
              label info ""
              trigger dep_7==complete
            task dep_6
              label info ""
              trigger dep_7==complete
            task dep_7
              label info ""
            task dep_8
              label info ""
              trigger dep_7==complete
            task dep_9
              label info ""
              trigger dep_7==complete
            task dep_10
              label info ""
              trigger dep_7==complete
            task dep_11
              label info ""
              trigger dep_7==complete
            task dep_12
              label info ""
              trigger dep_7==complete
            task dep_13
              label info ""
              trigger dep_7==complete
            
        endfamily
        
    endfamily   

    family filter_assim
        defstatus queued
        family departure_update
            
            edit first_update null
            edit last_update null
            edit ts_order null
            edit done 0

            task ctrl
              label info ""
              # trigger ../../filter_departure_cleaver_screening/departure/dep_1==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
              trigger ../../filter_departure_cleaver_screening/departure==active

            task update_1
              label info ""
              defstatus suspended
              # trigger ../../filter_departure_cleaver_screening/departure/dep_1==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_2
            label info ""
            defstatus suspended
            # trigger ../../filter_departure_cleaver_screening/departure/dep_2==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_3
              label info ""
              defstatus suspended
            # trigger ../../filter_departure_cleaver_screening/departure/dep_3==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_4
              label info ""
              defstatus suspended
              # trigger ../../filter_departure_cleaver_screening/departure/dep_4==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_5
              label info ""
              defstatus suspended
              # trigger ../../filter_departure_cleaver_screening/departure/dep_5==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_6
              label info ""
              defstatus suspended
              # trigger ../../filter_departure_cleaver_screening/departure/dep_6==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_7
              label info ""
              defstatus suspended
              # trigger ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_8
              label info ""
              defstatus suspended
            # trigger ../../filter_departure_cleaver_screening/departure/dep_8==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_9
              label info ""
              defstatus suspended
              # trigger ../../filter_departure_cleaver_screening/departure/dep_9==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_10
              label info ""
              defstatus suspended
              # trigger ../../filter_departure_cleaver_screening/departure/dep_10==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_11
              label info ""
              defstatus suspended
              # trigger ../../filter_departure_cleaver_screening/departure/dep_11==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_12
              label info ""
              defstatus suspended
                # trigger ../../filter_departure_cleaver_screening/departure/dep_12==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete
            task update_13
              label info ""
              defstatus suspended
              # trigger ../../filter_departure_cleaver_screening/departure/dep_13==complete and ../../filter_departure_cleaver_screening/departure/dep_7==complete

        endfamily
    endfamily 

    family postprocess
        defstatus suspended

        # defstatus queued        
        trigger filter_assim==complete

        task rename

        # task run_stats
        
        task archive
          trigger rename==complete

        task clean
          trigger archive==complete

    endfamily

    family forecast
        defstatus suspended

      #  defstatus queued
        trigger filter_assim==complete

        task 9h_forecast
        task seasonal_forecast
        task archive
 #           trigger 9h_forecast==complete or seasonal_forecast==complete 

    endfamily

    family cancel

        defstatus queued
        task cancel
           trigger ../forecast==complete

    endfamily



endsuite